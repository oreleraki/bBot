{"version":3,"sources":["../../src/services/API.js"],"names":["API","host","port","Promise","resolve","reject","status","socket","dgram","createSocket","datagram","send","err","on","message","unicodeValues","toJSON","data","unicodeString","String","fromCharCode","console","log","split","some","s","close","error"],"mappings":";;;;;;;AAAA;;;;;;;;;;;;;;;;;;IAEqBA,G;;;;;;;;;oCACIC,I,EAAMC,I,EAAM;AACjC,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,YAAI;AACF,cAAIC,MAAM,GAAG,EAAb;;AACA,cAAMC,MAAM,GAAGC,kBAAMC,YAAN,CAAmB,MAAnB,CAAf;;AACA,cAAMC,QAAQ,GAAG,wBAAjB;AAEAH,UAAAA,MAAM,CAACI,IAAP,CAAYD,QAAZ,EAAsBR,IAAtB,EAA4BD,IAA5B,EAAkC,UAAAW,GAAG,EAAI;AACvC,gBAAIA,GAAJ,EAASP,MAAM,CAACO,GAAD,CAAN;AACV,WAFD;AAIAL,UAAAA,MAAM,CAACM,EAAP,CAAU,SAAV,EAAqB,UAAAC,OAAO,EAAI;AAC9B,gBAAMC,aAAa,GAAGD,OAAO,CAACE,MAAR,GAAiBC,IAAvC;AACA,gBAAMC,aAAa,GAAGC,MAAM,CAACC,YAAP,OAAAD,MAAM,qBAAiBJ,aAAjB,EAA5B;AACAM,YAAAA,OAAO,CAACC,GAAR,CAAYJ,aAAZ;AACAZ,YAAAA,MAAM,IAAIY,aAAV;;AAEA,gBAAIA,aAAa,CAACK,KAAd,CAAoB,IAApB,EAA0BC,IAA1B,CAA+B,UAAAC,CAAC;AAAA,qBAAIA,CAAC,KAAK,OAAV;AAAA,aAAhC,CAAJ,EAAwD;AACtDrB,cAAAA,OAAO,CAACE,MAAD,CAAP;AACA,qBAAOC,MAAM,CAACmB,KAAP,EAAP;AACD;AACF,WAVD;AAWD,SApBD,CAoBE,OAAOC,KAAP,EAAc;AACdtB,UAAAA,MAAM,CAACsB,KAAD,CAAN;AACD;AACF,OAxBM,CAAP;AAyBD","sourcesContent":["import dgram from 'dgram';\n\nexport default class API {\n  static queryUT99Server(host, port) {\n    return new Promise((resolve, reject) => {\n      try {\n        let status = '';\n        const socket = dgram.createSocket('udp4');\n        const datagram = '\\\\status\\\\XServerQuery';\n\n        socket.send(datagram, port, host, err => {\n          if (err) reject(err);\n        });\n\n        socket.on('message', message => {\n          const unicodeValues = message.toJSON().data;\n          const unicodeString = String.fromCharCode(...unicodeValues);\n          console.log(unicodeString);\n          status += unicodeString;\n\n          if (unicodeString.split('\\\\').some(s => s === 'final')) {\n            resolve(status);\n            return socket.close();\n          }\n        });\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n}\n"],"file":"API.js"}