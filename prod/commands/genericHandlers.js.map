{"version":3,"sources":["../../src/commands/genericHandlers.js"],"names":["registerServer","message","_","serverId","roles","privilegedRoles","DiscordServers","findOne","server_id","exec","res","channel","send","console","log","save","registerQueryChannel","findOneAndUpdate","query_channel","id","store","dispatch","queryChannel","getState","registerPugChannel","pug_channel","pugChannel"],"mappings":"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","sourcesContent":["import { DiscordServers } from '../models';\nimport store from '../store';\nimport { setQueryChannel, setPugChannel } from '../store/actions';\nimport { privilegedRoles } from '../constants';\nimport { hasPrivilegedRole } from '../utils';\n\nexport const registerServer = async (message, _, serverId, { roles }) => {\n  try {\n    if (!hasPrivilegedRole(privilegedRoles, roles)) return;\n    const res = await DiscordServers.findOne({\n      server_id: serverId,\n    }).exec();\n\n    if (res)\n      return message.channel.send(\n        'Server is already registered with bBot :wink:'\n      );\n\n    console.log(serverId);\n    await new DiscordServers({ server_id: serverId }).save();\n    message.channel.send('Server registered with bBot!');\n  } catch (err) {\n    message.channel.send(\n      'Something went wrong. The developer of this bot has been notified '\n    );\n  }\n};\n\nexport const registerQueryChannel = async (message, _, serverId, { roles }) => {\n  try {\n    if (!hasPrivilegedRole(privilegedRoles, roles)) return;\n    const res = await DiscordServers.findOne({\n      server_id: serverId,\n    }).exec();\n\n    if (!res)\n      return message.channel.send(\n        'Please register the server with the bot! Type .register'\n      );\n\n    await DiscordServers.findOneAndUpdate(\n      { server_id: serverId },\n      { query_channel: message.channel.id }\n    ).exec();\n\n    store.dispatch(\n      setQueryChannel({ serverId, queryChannel: message.channel.id })\n    );\n\n    console.log(store.getState());\n    message.channel.send(\n      `<#${message.channel.id}> has been set as the query channel`\n    );\n  } catch (err) {\n    message.channel.send(\n      'Something went wrong. The developer of this bot has been notified '\n    );\n  }\n};\n\nexport const registerPugChannel = async (message, _, serverId, { roles }) => {\n  try {\n    if (!hasPrivilegedRole(privilegedRoles, roles)) return;\n    const res = await DiscordServers.findOne({\n      server_id: serverId,\n    }).exec();\n\n    if (!res)\n      return message.channel.send(\n        'Please register the server with the bot! Type .register'\n      );\n\n    await DiscordServers.findOneAndUpdate(\n      { server_id: serverId },\n      { pug_channel: message.channel.id }\n    ).exec();\n\n    store.dispatch(setPugChannel({ serverId, pugChannel: message.channel.id }));\n    console.log(store.getState());\n    message.channel.send(\n      `<#${message.channel.id}> has been set as the pug channel`\n    );\n  } catch (err) {\n    console.log(err);\n    message.channel.send(\n      'Something went wrong. The developer of this bot has been notified '\n    );\n  }\n};\n"],"file":"genericHandlers.js"}