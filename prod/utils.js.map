{"version":3,"sources":["../src/utils.js"],"names":["hasPrivilegedRole","privilegedRoles","userRoles","some","pr","find","ur","name","getPlayerList","players","noOfPlayers","noOfTeams","playerList","teams","team_0","team_1","team_2","team_3","team_255","spec","i","playerFlag","player","sanitizeName","push","team","parseInt","Object","values","createAlternatingObject","array","reduce","acc","item","arr","toLowerCase","replace","c","getMinutesAndSeconds","time","seconds","minutes","padNumberWithZeros","number","getTeamScores","info","maxTeams","teamScores","getTeamIndex","teamName","findIndex","t","computePickingOrder","idx","pickingOrder","remainingPlayers","wholeRound","length","reverse","shuffle","Array","from","sort","Math","random","getRandomInt","min","max","ceil","floor"],"mappings":"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","sourcesContent":["import { teams } from './constants';\n\nexport const hasPrivilegedRole = (privilegedRoles, userRoles) =>\n  privilegedRoles.some(pr => userRoles.find(ur => ur.name === pr));\n\n/**\n * @param {Object} players\n * @param {Number} noOfPlayers\n * @param {Number} noOfTeams\n */\nexport const getPlayerList = (players, noOfPlayers, noOfTeams) => {\n  const playerList = {\n    [teams.team_0]: [],\n    [teams.team_1]: [],\n    [teams.team_2]: [],\n    [teams.team_3]: [],\n    [teams.team_255]: [],\n    [teams.spec]: [],\n  };\n\n  for (let i = 0; i < noOfPlayers; i++) {\n    const playerFlag =\n      players[`countryc_${i}`] && players[`countryc_${i}`] !== 'none'\n        ? `:flag_${players[`countryc_${i}`]}:`\n        : `:flag_white:`;\n\n    const player = `${playerFlag} ${sanitizeName(players[`player_${i}`])}`;\n    if (players[`mesh_${i}`] === 'Spectator') {\n      playerList[teams.spec].push(player);\n      continue;\n    }\n\n    if (noOfTeams > 0) {\n      const team = parseInt(players[`team_${i}`]); // returns an index for the team\n      playerList[Object.values(teams)[team]].push(player);\n    } else {\n      playerList[teams.team_255].push(player);\n    }\n  }\n  return playerList;\n};\n\n/**\n * @param {Array} array\n * @description Creates a new object with the even index as key and odd index as the value\n * @returns {Object}\n */\nexport const createAlternatingObject = array =>\n  array.reduce((acc, item, i, arr) => {\n    if (i % 2 === 0) acc[item.toLowerCase()] = arr[i + 1];\n    return acc;\n  }, {});\n\n/**\n * @param {String} name\n * @description Escapes special characters in the name\n * @returns {String}\n */\nexport const sanitizeName = name =>\n  name.replace(/(\\*|`|:|_|~|\\|)/g, c => `\\\\${c}`);\n\n/**\n * @param {Number} time\n * @description Gives minutes and seconds\n * @returns {Object}\n */\nexport const getMinutesAndSeconds = time => {\n  const seconds = time % 60;\n  const minutes = (time - seconds) / 60;\n  return { seconds, minutes };\n};\n\n/**\n * @param {Number} number\n * @description padded with zero(s)\n * @returns {String}\n */\nexport const padNumberWithZeros = number =>\n  number > -1 && number < 10 ? `0${number}` : `${number}`;\n\n/**\n * @param {Object} info\n * @param {Number} maxTeams\n * @description Gives the respective scores for all teams\n * @returns {Object}\n */\nexport const getTeamScores = (info, maxTeams) => {\n  const teamScores = {\n    [teams.team_0]: null,\n    [teams.team_1]: null,\n    [teams.team_2]: null,\n    [teams.team_3]: null,\n  };\n\n  for (let i = 0; i < maxTeams; i++) {\n    teamScores[Object.values(teams)[i]] = info[`teamscore_${i}`];\n  }\n  return teamScores;\n};\n\n/**\n * @param {String} teamName\n * @description Returns the index for the team\n * @returns {Number}\n */\nexport const getTeamIndex = teamName =>\n  Object.values(teams).findIndex(t => t === teamName);\n\n/**\n * @param {Number} noOfPlayers\n * @param {Number} noOfTeams\n * @description Computes the picking order for the pug. Returns [] if invalid and [-1] for duels\n * @returns {Array}\n */\nexport const computePickingOrder = (noOfPlayers, noOfTeams) => {\n  if (noOfPlayers < noOfTeams || noOfPlayers % noOfTeams !== 0) return [];\n  let idx = 0;\n  let pickingOrder = [];\n  let remainingPlayers = noOfPlayers - noOfTeams; // because captains\n  let wholeRound = [];\n\n  while (remainingPlayers > 0) {\n    pickingOrder.push(idx);\n    wholeRound.push(idx);\n    if (\n      wholeRound.length === noOfTeams &&\n      pickingOrder.length !== noOfPlayers - noOfTeams\n    ) {\n      pickingOrder = [...pickingOrder, ...wholeRound.reverse()];\n      wholeRound = [];\n      idx = 0;\n      remainingPlayers = remainingPlayers - noOfTeams - 1;\n    } else {\n      idx++;\n      remainingPlayers--;\n    }\n  }\n  return pickingOrder.length > 0 ? pickingOrder : [-1];\n};\n\nexport const shuffle = array =>\n  Array.from(array).sort(() => Math.random() - 0.5);\n\nexport function getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n"],"file":"utils.js"}